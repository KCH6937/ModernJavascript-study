# 8주차(6/6 ~ 6/12)

# 범위

- 40장 이벤트 ~ 44장 REST API
(p754 ~ p840)

# 과제

1. **비동기 프로그래밍의 동작 방식을 간단하게 설명해주세요.**

- 동기 처리

특정 코드 연산이 끝난 뒤 다음 코드가 순차적으로 실행됨. 

- 비동기 처리

특정 코드 연산이 끝날 때가지 기다리지 않고 다른 코드 먼저 실행 되는 특성. 이를 활용해서

- 자바스크립트 콜백 함수

함수를 매개변수로 받는 함수

- setTimeout()

 지정한 시간이 지난 뒤 매개 변수로 받은 함수나 코드 조각을 실행시키는 메서드이다.  매개 변수로 받는 콜백함수이다. 비동기 메서드

```jsx
function func1(){ console.log('func1'); } 
function func2(){ console.log('func2'); } 
function func3(){ console.log('func3'); } 

func1(); 
func2();
func3(); 

```

![Untitled](8%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1(6%206%20~%206%2012)%20d93bf37921cf4e2b9ee289d2dece1b28/Untitled.png)

위의 코드는 func1, func2, func3 순으로 실행이 된다. 

자바스크립트 엔진은 위에서 아래로 코드를 읽어드리며,

 순차적으로 한 함수가 끝나면 다음 함수가 실행 되는 식으로 순차적으로 실행되는 것 처럼 느껴진다. 

이런 식으로 하나의 코드가 끝나면 다음 코드로 넘어가는 방식을 ‘동기적 처리’라고 한다.

하지만, 아래의 코드를 보면

```jsx
function func1(){
    console.log("1st");
}
function func2(){
    console.log("2st");
}
function func3(){
    console.log("3st");
}

 func1();
setTimeout(()=>{
 func2();
}, 1000)
	func3();
fu
```

![Untitled](8%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1(6%206%20~%206%2012)%20d93bf37921cf4e2b9ee289d2dece1b28/Untitled%201.png)

위의 코드를 실행한 결과다. 

실행 결과를 보면 알수 있듯이, 순차적으로 실행되는 것과 멀다.

 코드가 적힌 순서와 상관이 없이 func3가 먼저 실행이 되고 1초가 지난 뒤 이어서 func2 실행이 된다.

fun2가 실행이 끝나지 않은 상태에서 func3가 동작하였다. 

이런 식으로 특정 코드가 실행 되는 와중에 다른 코드를 먼저 실행시키는 방식을 비동기적 처리라고 한다.

1. **비동기 프로그래밍을 사용하는 이유를 간단하게 설명해주세요.**

1) 교착 상태가 덜 발생함.

2) 동시 동작 (유사 병렬)

이런 비동기 처리가 필요한 이유는 여러 코드들을 동시에 실행시키는 것이 가능해지고(마치 병열로 동작하는 것처럼 쓰는 게 가능함.), 

자바스크립트로 서버로 부터 데이터를 요청했을 때 동기적으로 처리하면 데이터를 모두 다 받을 때 까지 다른 코드를 실행하지 않고 기다려야 될 것이다. 

이를 비동기적으로 데이터를 받는 것과 상관이 없이 다른 코드들을 실행시킬수 있다.

- node.js의 비동기

[About | Node.js](https://nodejs.org/ko/about/)

[블록킹과 논블록킹 살펴보기 | Node.js](https://nodejs.org/ko/docs/guides/blocking-vs-non-blocking/)

node.js는 달리 블로킹(특정 작업이 완료가 될 때까지 자바스크립트 실행이 중단 되는 것)이 없으며, 프로세스 교착 상태가 일어나지 않는 다고 한다.

*‘웹서버로의 요청이 완료되기까지 50ms가 걸리고 50ms 중 45ms는 비동기로 실행될 수 있는 데이터베이스 I/O인 상황을 생각해 보겠습니다.* 

*논블로킹 비동기 작업을 사용하면 요청마다 45ms는 다른 요청을 처리할 수 있게 됩니다. 이는 블로킹 메서드 대신 논블로킹 메서드를 사용함으로써 확연히 다른 성능 차이가 납니다.’*

또 여기서는 직접적인 예시를 들었는데, 

비동기로 동작하는 데이터 베이스는 웹서버로 요청을 보낼 때 동시에 다른 곳에서도 요청을 받을 수 있다고 한다. 

동기로 동작한다면 동시에 여러 곳의 요청을 처리하는 게 불가능 할 것이다. 

한 요청을 받는 동안50ms 동안 다른 요청을 받을 수 없다.

1. **setTimeout은 무엇을 보여줄까요?**

아래 코드에선 `setTimeout`을 이용해 호출을 스케줄링하고 있습니다. 그런데 그 아래 코드에선 실행 시간이 100ms 이상 걸리는 무거운 작업을 하고 있네요.

이런 경우 setTimeout에 넘겨준 함수는 언제 실행될까요?

1. 반복문 실행 후
2. 반복문 실행 전
3. 반복문이 실행되는 시점

얼럿창엔 어떤 값이 출력될까요?, 그리고 그 이유는 무엇인지 간단하게 설명해주세요.

```jsx
let i = 0;

setTimeout(() => alert(i), 100); // ?

// 아래 반복문을 다 도는 데 100ms 이상의 시간이 걸린다고 가정합시다.
for(let j = 0; j < 100000000; j++) {
  i++;
}
```

- 답

```jsx
let i = 0; 

for(let j = 0; j < 100000000; j++) {
  i++;
}

setTimeout(() => alert(i), 100); // 1000
```

이렇게 작동 한다. setTimeout 메서드는 ‘비동기’ 메서드라서 순서 상관없이 바로 아래에 있는 코드 부터 실행 시킨다. 

의문점

---

- 비동기로 동작하는 것에 단점이 있는 지 궁금하다.

→ 비동기로 동작하면 문제가 ‘순서대로’ 실행 되지 않는 단점이 있다. 그 외에 어떤 단점이 있는 지 궁금. (책에서는 테스크가 순서대로 실행되지 않는 것이 단점이라고 쓰여있다.)

- 단일 스레드가 뭔지, 단일 스레드의 단점과 장점
- node.js 비동기 런타임의 단점.

출처: ko.javascript.info